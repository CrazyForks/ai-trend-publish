<% function formatNumber(num) { return num >= 1000 ? (num / 1000).toFixed(1) +
'k' : num; } %>

<div
  style="
    max-width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
      'Helvetica Neue', Arial, sans-serif;
    line-height: 1.6;
    color: #333;
  "
>
  <div
    style="
      font-size: 20px;
      font-weight: bold;
      text-align: center;
      color: #1a1a1a;
      border-bottom: 1px solid #eaeaea;
      padding: 10px 0;
    "
  >
    GitHub AI 相关热门仓库
  </div>
  <div style="font-size: 13px; color: #666; text-align: center; padding: 8px 0">
    更新时间：<%= renderDate %>
  </div>

  <% items.forEach((item, index) => { %>
  <div
    style="
      background: #fff;
      border: 1px solid #eaeaea;
      border-radius: 8px;
      margin: 12px 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    "
  >
    <div style="padding: 15px">
      <div
        style="
          display: flex;
          align-items: center;
          border-left: 4px solid #07c160;
          padding-left: 10px;
        "
      >
        <span
          style="display: inline-block; width: 24px; height: 24px; line-height: 24px; text-align: center; background: <%= index < 3 ? '#07c160' : '#f0f0f0' %>; color: <%= index < 3 ? '#fff' : '#666' %>; border-radius: 4px; font-size: 14px;"
          ><%= index < 3 ? ['🏆','🥈','🥉'][index] : (index + 1) %></span
        >
        <span
          style="
            font-size: 16px;
            font-weight: bold;
            color: #1a1a1a;
            margin-left: 8px;
          "
          ><%= item.name %></span
        >
      </div>

      <div
        style="
          margin: 12px 0;
          padding: 8px 12px;
          background: #fafafa;
          border-radius: 6px;
          font-size: 14px;
          color: #666;
        "
      >
        <%= item.title %>
      </div>

      <div
        style="display: flex; align-items: center; gap: 15px; padding: 0 12px"
      >
        <span style="color: #07c160; font-size: 14px"
          >⭐️ <%= formatNumber(item.totalStars) %></span
        >
        <% if (item.lastWeekStars > 0) { %>
        <span style="color: #07c160; font-size: 14px"
          >📈 本周新增 <%= formatNumber(item.lastWeekStars) %></span
        >
        <% } %>
      </div>

      <div
        style="
          display: flex;
          gap: 15px;
          padding: 8px 12px;
          font-size: 13px;
          color: #666;
        "
      >
        <span
          >作者：<span style="color: #07c160"><%= item.author %></span></span
        >
        <span
          >语言：<span style="color: #07c160"><%= item.language %></span></span
        >
      </div>

      <div
        style="
          margin: 12px 0;
          padding: 12px;
          background: #f9f9f9;
          border-radius: 6px;
          font-size: 14px;
          color: #4e5969;
          line-height: 1.6;
        "
      >
        <%= item.description %>
      </div>

      <% if (item.tags && item.tags.length > 0) { %>
      <div style="display: flex; flex-wrap: wrap; gap: 8px; padding: 0 12px">
        <% item.tags.forEach(tag => { %>
        <span
          style="
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            background: #f0f9f4;
            border: 1px solid #e6f3eb;
            border-radius: 16px;
            color: #07c160;
            font-size: 13px;
          "
          ><%= tag %></span
        >
        <% }); %>
      </div>
      <% } %>

      <div
        style="
          margin-top: 15px;
          padding: 12px;
          background: #f8f9fa;
          border-radius: 6px;
        "
      >
        <div style="margin-bottom: 10px">
          <div style="color: #333; font-size: 13px; margin-bottom: 4px">
            📎 GitHub
          </div>
          <div style="color: #07c160; word-break: break-all; font-size: 13px">
            <%= item.url %>
          </div>
        </div>

        <% if (item.relatedUrls && item.relatedUrls.length > 0) { %>
        <div>
          <div style="color: #333; font-size: 13px; margin: 8px 0">
            🔗 相关链接
          </div>
          <% item.relatedUrls.forEach(link => { %>
          <div style="margin-top: 6px">
            <div style="color: #666; font-size: 13px"><%= link.title %></div>
            <div style="color: #07c160; word-break: break-all; font-size: 13px">
              <%= link.url %>
            </div>
          </div>
          <% }); %>
        </div>
        <% } %>
      </div>
    </div>
  </div>
  <% }); %>

  <div
    style="
      font-size: 12px;
      color: #999;
      text-align: center;
      padding: 10px 0;
      border-top: 1px solid #eee;
    "
  >
    数据来源：HelloGitHub
  </div>
</div>
